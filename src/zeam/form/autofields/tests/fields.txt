====================
zeam.form.autofields
====================

The purpose of autofields is to collect fields from different
location. There are group to a form by an interface:

  >>> from zope.interface import Interface

  >>> class IMyFieldSet(Interface):
  ...    pass

  >>> from zeam.form import autofields, base
  >>> class MySpecialFields(autofields.AutoFields):
  ...      autofields.group(IMyFieldSet)
  ...      fields = base.Fields(base.Field('Title'), base.Field('Description'))

And we need to Grok them:

  >>> grok_component("fields", MySpecialFields)
  True

Now, you can create a form with a FieldCollector. It will collect all
defined fields:

  >>> class MyForm(base.Form):
  ...   fields = autofields.FieldsCollector(IMyFieldSet)

  >>> from zope.publisher.browser import TestRequest
  >>> request = TestRequest()
  >>> form = MyForm(object(), request)

  >>> form.fields
  <Fields>
  >>> list(form.fields)
  [<Field Title>, <Field Description>]

You can't change those fields:

  >>> form.fields = base.Fields()
  Traceback (most recent call last):
     ...
  AttributeError

The querying of the fields is cached. If you had new fields, you will
only see them in a new form:

  >>> class PersonalFields(autofields.AutoFields):
  ...      autofields.group(IMyFieldSet)
  ...      fields = base.Fields(base.Field('Name'), base.Field('Phone'))

  >>> grok_component("fields", PersonalFields)
  True

  >>> list(form.fields)
  [<Field Title>, <Field Description>]

But on a new form:

  >>> new_form = MyForm(object(), request)
  >>> list(new_form.fields)
  [<Field Title>, <Field Description>, <Field Name>, <Field Phone>]
